{"version":3,"sources":["assets/img/dollar.png","game.js","components/Message.js","components/Button.js","components/Box.js","components/Statistics.js","App.js","index.js"],"names":["module","exports","Game","new","boxes","id","isRevealed","hasMoney","isPicked","moneyIndex","randomIndex","map","box","index","state","pickBox","game","boxId","revealedBox","find","hasWon","Math","floor","random","Message","text","className","Button","isLoading","type","onClick","disabled","children","Box","style","opacity","border","backgroundColor","backgroundImage","dollar","backgroundRepeat","Statistics","data","playedRounds","keptWins","switchedWins","keptPercentage","toFixed","switchPercentage","Number","isInteger","App","useState","setGame","isSimulating","setIsSimulating","statistics","setStatistics","simulateRounds","shouldKeep","iterations","result","firstPickId","isSelected","setTimeout","_prev","push","switched","instructionMessage","key","kept","keptResult","reduce","acc","run","switchedResult","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f5a367d1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/dollar.3ea96691.png\";","const Game = {\n  new: () => {\n    const boxes = [\n      { id: 0, isRevealed: false, hasMoney: false, isPicked: false },\n      { id: 1, isRevealed: false, hasMoney: false, isPicked: false },\n      { id: 2, isRevealed: false, hasMoney: false, isPicked: false },\n    ];\n    const moneyIndex = randomIndex(boxes);\n    return {\n      boxes: boxes.map((box, index) => {\n        return index === moneyIndex ? { ...box, hasMoney: true } : box;\n      }),\n      state: \"FIRST_PICK\",\n    };\n  },\n  pickBox: (game, boxId) => {\n    let boxes = game.boxes;\n    boxes = boxes.map((box) =>\n      box.id === boxId ? { ...box, isPicked: true } : box\n    );\n    const revealedBox = boxes.find((box) => !box.isPicked && !box.hasMoney);\n    if (game.state === \"FIRST_PICK\") {\n      return {\n        ...game,\n        state: \"SECOND_PICK\",\n        boxes: boxes.map((box) => {\n          return revealedBox.id === box.id ? { ...box, isRevealed: true } : box;\n        }),\n      };\n    }\n    return {\n      ...game,\n      state: \"FINISHED\",\n      hasWon: game.boxes[boxId].hasMoney,\n      boxes: boxes.map((box) => ({ ...box, isRevealed: true })),\n    };\n  },\n};\n\nconst randomIndex = () => Math.floor(Math.random() * 3);\n\nexport default Game;\n","import React from \"react\";\n\nexport default function Message({ text }) {\n  return (\n    <div className=\"message\">\n      {text}\n      <span className=\"message-bubble\"></span>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function Button({\n  isLoading = false,\n  type = \"primary\",\n  onClick,\n  disabled,\n  children,\n}) {\n  return (\n    <button className={`button ${type}`} onClick={onClick} disabled={disabled}>\n      {isLoading ? <div className=\"loader\"></div> : children}\n    </button>\n  );\n}\n","import React from \"react\";\nimport dollar from \"../assets/img/dollar.png\";\n\nexport default function Box({\n  isRevealed,\n  hasMoney,\n  isPicked,\n  disabled,\n  children,\n  onClick,\n}) {\n  let style;\n\n  if (!isRevealed) {\n    style = { opacity: \"1\" };\n  }\n\n  if (isRevealed) {\n    style = { opacity: \"0.2\" };\n  }\n  if (isPicked) {\n    style = { border: \"12px solid white\" };\n  }\n\n  if (isRevealed && hasMoney) {\n    style = {\n      backgroundColor: \"#92bb92\",\n      backgroundImage: `url(${dollar})`,\n      backgroundRepeat: \"repeat\",\n    };\n  }\n\n  return (\n    <button className=\"box\" style={style} onClick={onClick} disabled={disabled}>\n      <span>{children}</span>\n    </button>\n  );\n}\n","import React from \"react\";\n\nexport default function Statistics({ data, isLoading }) {\n  const { playedRounds, keptWins, switchedWins } = data;\n  const keptPercentage = ((keptWins / playedRounds) * 100).toFixed(1);\n  const switchPercentage = ((switchedWins / playedRounds) * 100).toFixed(1);\n\n  const hasStatistics =\n    Number.isInteger(Math.floor(keptPercentage)) &&\n    Number.isInteger(Math.floor(switchPercentage));\n\n  return hasStatistics && !isLoading ? (\n    <div className=\"statistics\">\n      <div>Keep</div>\n\n      <div className=\"statistics-row\">\n        <div className=\"statistics-data\">\n          <b>Count:</b>\n          {` ${playedRounds}`}\n        </div>\n\n        <div className=\"statistics-data\">\n          <b>Odds:</b>\n          {` ${keptPercentage} %`}\n        </div>\n      </div>\n\n      <div className=\"separator\" />\n\n      <div>Switch</div>\n\n      <div className=\"statistics-row\">\n        <div className=\"statistics-data\">\n          <b>Count:</b>\n          {` ${playedRounds}`}\n        </div>\n\n        <div className=\"statistics-data\">\n          <b>Odds:</b>\n          {` ${switchPercentage} %`}\n        </div>\n      </div>\n    </div>\n  ) : null;\n}\n","import React, { useState } from \"react\";\r\nimport Game from \"./game\";\r\nimport Message from \"./components/Message\";\r\nimport Button from \"./components/Button\";\r\nimport Box from \"./components/Box\";\r\nimport Statistics from \"./components/Statistics\";\r\n\r\nfunction App() {\r\n  const [game, setGame] = useState(Game.new());\r\n  const [isSimulating, setIsSimulating] = useState(false);\r\n  const [statistics, setStatistics] = useState({\r\n    switchedWins: 0,\r\n    keptWins: 0,\r\n    playedRounds: 0,\r\n  });\r\n\r\n  const pickBox = (id) => setGame(Game.pickBox(game, id));\r\n\r\n  const resetGame = () => {\r\n    setStatistics({ ...statistics, playedRounds: 0 });\r\n    setGame(Game.new());\r\n  };\r\n\r\n  const runSimulation = () => {\r\n    setIsSimulating(true);\r\n    const iterations = 1000;\r\n    const kept = simulateRounds(true, iterations);\r\n    const switched = simulateRounds(false, iterations);\r\n\r\n    const keptResult = kept.reduce((acc, run) => {\r\n      if (run.hasWon) return acc + 1;\r\n      return acc;\r\n    }, 0);\r\n\r\n    const switchedResult = switched.reduce((acc, run) => {\r\n      if (run.hasWon) return acc + 1;\r\n      return acc;\r\n    }, 0);\r\n\r\n    setStatistics({\r\n      switchedWins: switchedResult,\r\n      keptWins: keptResult,\r\n      playedRounds: statistics.playedRounds + iterations,\r\n    });\r\n    setTimeout(() => {\r\n      setIsSimulating(false);\r\n    }, 1000);\r\n  };\r\n\r\n  const simulateRounds = (shouldKeep, iterations) => {\r\n    let result = [];\r\n    for (let index = 0; index < iterations; index++) {\r\n      let game = Game.new();\r\n      const firstPickId = Math.floor(Math.random() * 3);\r\n\r\n      game = Game.pickBox(game, firstPickId);\r\n      if (shouldKeep) {\r\n        game = Game.pickBox(game, firstPickId);\r\n      } else {\r\n        game = Game.pickBox(\r\n          game,\r\n          game.boxes.find((box) => !box.isSelected && !box.isRevealed).id\r\n        );\r\n      }\r\n\r\n      setTimeout(() => {\r\n        setGame((_prev) => {\r\n          return game;\r\n        });\r\n      }, 100);\r\n\r\n      result.push({ hasWon: game.hasWon, switched: !shouldKeep });\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  const instructionMessage = () => {\r\n    switch (game.state) {\r\n      case \"FIRST_PICK\":\r\n        return \"Welcome contender! Please, pick a box!\";\r\n\r\n      case \"SECOND_PICK\":\r\n        return \"Switch or keep your box!\";\r\n\r\n      case \"FINISHED\":\r\n        if (game.hasWon) {\r\n          return \"You won the money!\";\r\n        } else {\r\n          return \"Too bad, you did not win the money, try again!\";\r\n        }\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <div className=\"container \">\r\n        <Message\r\n          text={\r\n            isSimulating\r\n              ? \"Running simulation, please wait!\"\r\n              : instructionMessage()\r\n          }\r\n        />\r\n\r\n        <div className=\"boxes\">\r\n          {game.boxes.map((box) => (\r\n            <Box\r\n              key={box.id}\r\n              disabled={box.isRevealed || game.state === \"FINISHED\"}\r\n              isRevealed={box.isRevealed}\r\n              hasMoney={box.hasMoney}\r\n              isPicked={box.isPicked}\r\n              onClick={() => pickBox(box.id)}\r\n            >\r\n              {box.id + 1}\r\n            </Box>\r\n          ))}\r\n        </div>\r\n\r\n        <Button onClick={resetGame} disabled={game.state === \"FIRST_PICK\"}>\r\n          Reset\r\n        </Button>\r\n\r\n        <Button\r\n          type=\"secondary\"\r\n          isLoading={isSimulating}\r\n          onClick={runSimulation}\r\n        >\r\n          Run simulation\r\n        </Button>\r\n\r\n        <Statistics data={statistics} isLoading={isSimulating} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}